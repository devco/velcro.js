!function(t){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?t(module.exports||exports):"function"==typeof define&&define.amd?define(["exports"],t):t(window.vc={})}(function(t){(function(){"function"!=typeof Function.prototype.bind&&(Function.prototype.bind=function(t){var n=Array.prototype.slice.call(arguments,1),e=this,i=function(){},o=function(){return e.apply(this instanceof i&&t?this:t,n.concat(Array.prototype.slice.call(arguments)))};return i.prototype=this.prototype,o.prototype=new i,o})})(),function(){t.utils={each:function(t,n){if(t=t||[],"string"==typeof t&&(t=[t]),"number"==typeof t.length){for(var e=0;t.length>e;e++)if(n(e,t[e])===!1)return}else for(var i in t)if(n(i,t[i])===!1)return},fnCompare:function(t,n){return t?("object"==typeof t&&t.constructor&&(t=t.constructor),"function"==typeof t&&(t=""+t),t===n):!1},isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},isInstance:function(t){return t&&"function"==typeof t.constructor},isObject:function(t){return"[object Object]"===Object.prototype.toString.call(t)},isValue:function(n){return"function"==typeof n&&""+n==""+t.value()},merge:function(){for(var n={},e=0;arguments.length>e;e++){var i=arguments[e];if(t.utils.isObject(i))for(var o in i){var s=i[o];n[o]=void 0!==n[o]?t.utils.isInstance(s)?s:t.utils.isObject(n[o])&&t.utils.isObject(s)?t.utils.merge(n[o],s):s:s}}return n},parseBinding:function(t,n){var e="";for(var i in n)e+="var "+i+"=__context['"+i+"'];";e+="return {"+t+"};";try{return Function("__context",e)(n)}catch(o){throw'Error parsing binding "'+t+'" with message: "'+o+'"'}},parseJson:function(t){if("undeinfed"==typeof JSON||"function"!=typeof JSON.parse)throw'Unable to parse JSON string "'+t+'" because no JSON parser is available via JSON.parse().';try{return JSON.parse(t)}catch(n){throw'Error parsing response "'+response+'" with message "'+n+'".'}},extract:function(n){var e={};return t.utils.each(n,function(n,i){e[n]=t.utils.isValue(i)?i():i}),e},throwForElement:function(n,e){throw e+"\n"+t.dom(n).html()}}}(),function(){var n=!1;t.Class=function(){},t.Class.extend=function(t){function e(){n||"function"!=typeof this.init||this.init.apply(this,arguments)}var i=arguments.callee;n=!0,e.prototype=new this,n=!1,e.extend=i;for(var o in t)e.prototype[o]=t[o];return e.prototype.constructor=e}}(),function(){function n(t){var n=t.match(/<!--\s*(.*?)\s*-->/);if(n)return document.createComment(n[0]);var i=t.match(/^<([^\s>]+)/)[1],o=document.createElement(e(i));o.innerHTML=t;var s=o.childNodes[0];return o.removeChild(s),s}function e(t){var n={colgroup:"table",col:"colgroup",caption:"table",thead:"table",tbody:"table",tfoot:"table",tr:"tbody",th:"thead",td:"tr"};return t=t.toLowerCase(),n[t]!==void 0?n[t]:"div"}t.Dom=t.Class.extend({element:null,init:function(e){e instanceof t.Dom?e=e.raw():"string"==typeof e&&(e=n(e)),this.element=e},raw:function(){return this.element},css:function(t){var n=[];for(var e in t)t[e]&&-1===n.indexOf(e)&&n.push(t[e]);return this.attr("class",n.join(" ").replace(/^\s\s*/,"").replace(/\s\s*$/,""))},attr:function(t,n){return 1===arguments.length?this.element.getAttribute?this.element.getAttribute(t)||"":this.element[t]===void 0?"":this.element[t]||"":n?(this.element.setAttribute?this.element.setAttribute(t,n):this.element[t]=n,this):(this.element.removeAttribute?this.element.removeAttribute(t):this.element[t]=null,this)},on:function(t,n){function e(t){t.preventDefault||(t.preventDefault=function(){return t.returnValue=!1,t}),t.stopPropagation||(t.stopPropagation=function(){return t.cancelBubble=!0,t}),n(t)===!1&&t.preventDefault()}var i=this;return this.element.addEventListener?this.element.addEventListener(t,e,!1):element.attachEvent?this.element.attachEvent("on"+t,function(t){e.call(i.element,t)}):this.element["on"+t]=e,this},off:function(t,n){return this.element.removeEventListener?this.element.removeEventListener(t,n,!1):this.element.detachEvent?this.element.detachEvent(t,n):delete this.element["on"+t],this},fire:function(t){var n;return document.createEventObject?(n=document.createEventObject(),this.element.fireEvent(t,n)):(n=document.createEvent("Events"),n.initEvent(t,!0,!0),this.element.dispatchEvent(n)),this},destroy:function(){return this.element.parentNode.removeChild(this.element),this.element.innerHTML="",delete this.element.attributes,delete this.element.childNodes,this},html:function(){var t=document.createElement(e(this.element.tagName));return t.appendChild(this.element.cloneNode(!0)),t.innerHTML},contents:function(t){return arguments.length?(this.element.innerHTML=t,this):this.element.innerHTML},append:function(n){return this.element.appendChild(t.dom(n).raw()),this},text:function(t){return arguments.length?(this.element.innerText=t,this):this.element.innerText},tag:function(){return this.element.tagName.toLowerCase()}}),t.dom=function(n){return new t.Dom(n)}}(),function(){t.Event=t.Class.extend({init:function(){return this.stack=[],this},bind:function(t){return this.stack.push(t),this},unbind:function(t){if(t){var n=[];for(var e in this.stack)this.stack[e]!==t&&n.push(this.stack[e]);this.stack=n}else this.stack=[];return this},once:function(t){var n=this;return this.bind(function(){t.call(t,arguments),n.unbind(t)})},trigger:function(){return this.triggerArgs(Array.prototype.slice.call(arguments))},triggerArgs:function(t){for(var n in this.stack)if(this.stack[n].apply(this.stack[n],t)===!1)return!1;return this}})}(),function(){function n(){for(var t=!1,n=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],e=0;n.length>e;e++)try{t=n[e]()}catch(i){continue}if(!t)throw"An XMLHttpRequest could not be generated.";return t}t.Http=t.Class.extend({init:function(n){return this.before=new t.Event,this.after=new t.Event,this.success=new t.Event,this.error=new t.Event,this.options=t.utils.merge({async:!0,cache:!1,headers:{},parsers:{"application/json":t.utils.parseJson},prefix:"",suffix:""},n),this},"delete":function(n){return this.request(t.utils.merge(n,{type:"delete"}))},get:function(n){return this.request(t.utils.merge(n,{type:"get"}))},head:function(n){return this.request(t.utils.merge(n,{type:"head"}))},options:function(n){return this.request(t.utils.merge(n,{type:"options"}))},patch:function(n){return this.request(t.utils.merge(n,{type:"patch"}))},post:function(n){return this.request(t.utils.merge(n,{type:"post"}))},put:function(n){return this.request(t.utils.merge(n,{type:"put"}))},request:function(e){var i=this,o=n();e=t.utils.merge({url:"",type:"GET",data:{},success:function(){},error:function(){},before:function(){},after:function(){}},e);var s=this.options.prefix+e.url+this.options.suffix,r=e.type.toUpperCase(),u=e.data;u instanceof t.Model&&(u=u.raw()),t.utils.isObject(u)&&(u=this.serialize(u)),u&&("GET"===e.type?s+="?"+u:o.setRequestHeader("Content-Type","application/x-www-form-urlencoded")),this.options.cache||(s+=u&&"GET"===r?"&":"?",s+=(new Date).getTime()),o.open(r,s,this.options.async);for(var a in this.options.headers)o.setRequestHeader(a,this.options.headers[a]);return o.onreadystatechange=function(){if(4===o.readyState){if(200!==o.status&&304!==o.status)return e.error.call(e.error,o),i.error.trigger(o),e.after.call(e.after,o),i.after.trigger(o),void 0;var t=o.responseText,n=o.getAllResponseHeaders();"string"==typeof n["Content-Type"]&&"function"==typeof i.options.parsers[n["Content-Type"]]?t=i.options.parsers[n["Content-Type"]](t):"string"==typeof i.options.headers.Accept&&"function"==typeof i.options.parsers[i.options.headers.Accept]&&(t=i.options.parsers[i.options.headers.Accept](t)),e.success.call(e.success,t),i.success.trigger(t),e.after.call(e.after,o),i.after.trigger(o)}},e.before.call(e.before,o),this.before.trigger(o),"GET"===r?o.send():o.send(u),this},serialize:function(t,n){var e=[];for(var i in t){var o=n?n+"["+i+"]":i,s=t[i];e.push("object"==typeof s?this.serialize(s,o):encodeURIComponent(o)+"="+encodeURIComponent(s))}return e.join("&")}})}(),function(){function n(t){return t.replace(/http(s)?\:\/\/[^\/]+/,"")}function e(t){window.addEventListener?window.addEventListener(t,s,!1):window["on"+t]=s}function i(t){document.createEvent?(event=document.createEvent("HTMLEvents"),event.initEvent(t,!0,!0),window.dispatchEvent(event)):window["on"+t](document.createEventObject())}function o(t,n){if(!n){var e=t.replace(/^#/,""),i=document.getElementById(e),o=window.pageXOffset?window.pageXOffset:document.body.scrollLeft,s=window.pageYOffset?window.pageYOffset:document.body.scrollTop,r=document.createElement("div");i&&(i.id=""),r.id=e||"_",r.style.position="absolute",r.style.width=0,r.style.height=0,r.style.left=o+"px",r.style.top=s+"px",r.style.padding=0,r.style.margin=0,document.body.appendChild(r),window.location.hash="#"+r.id,document.body.removeChild(r),i&&(i.id=e)}}function s(){for(var t=0;r.length>t;t++)r[t].dispatch()}var r=[];t.Router=t.Class.extend({init:function(n){return this.options=t.utils.merge({app:{},state:{},view:{}},n),this.enter=new t.Event,this.exit=new t.Event,this.render=new t.Event,this.params={},this.route=!1,this.routes={},this.app=this.options.app instanceof t.App?this.options.app:new t.App(this.options.app),this.state=this.options.state instanceof t.State?this.options.state:new t.State(this.options.state),this.view=this.options.view instanceof t.View?this.options.view:new t.View(this.options.view),this},handler:function(t){t()},renderer:function(n,e){var i=this,o=n.options.controller.apply(n.options.controller,e);o instanceof t.Model||(o=t.Model.extend(o),o=new o),this.view.render(n.options.view,function(t){i.app.bindDescendants(t.options.target,o),i.render.trigger(i,n,e)})},bind:function(){return this.unbind(),r.push(this),"onpopstate"in window&&this.state.enabled&&(!this.state.enabled||window.location.hash)||this.dispatch(),this},unbind:function(){for(var t=0;r.length>t;t++)this===r[t]&&delete r[t];return this},set:function(n,e){return e instanceof t.Route||(e=new t.Route(t.utils.merge({controller:"function"==typeof e?e:function(){},format:n,match:RegExp("^"+n+"$"),view:n||"index"},e))),this.routes[n]=e,this},get:function(t){if(this.has(t))return this.routes[t];throw'Route "'+t+'" does not exist.'},has:function(t){return this.routes[t]!==void 0},remove:function(t){return this.has(t)&&delete this.routes[t],this},dispatch:function(t){function n(t,n){return function(){e.renderer(t,n)}}var e=this;t===void 0&&(t=this.state.get());for(var i in this.routes){var o=this.routes[i],s=o.query(t);"number"==typeof s.length&&(this.route&&this.exit.trigger(this,this.state.previous,this.route,this.params),this.params=s,this.route=o,this.state.previous=t,this.enter.trigger(this,t,o,s),this.handler(n(o,s)))}return this},go:function(t,n,e){return this.state.push(this.get(t).generate(n),e),this},generate:function(t,n){return this.get(t).generate(n)}}),t.Route=t.Class.extend({init:function(n){return this.options=t.utils.merge({controller:function(){},format:"",match:/.*/,view:!1},n),this},query:function(t){var n=t.match(this.options.match);return null===n?!1:(n.shift(),n)},generate:function(t){var n=this.options.format;for(var e in t)n=n.replace(RegExp("\\:"+e,"g"),t[e]);return n}});var u,a=window.location.hash,c=!1;t.State=t.Class.extend({previous:!1,enabled:!1,init:function(){return this.options=t.utils.merge({scroll:!1}),this.states={},t.State.start(),this},get:function(){return this.enabled&&window.history.pushState?n(window.location.href):window.location.hash.substring(1)},push:function(t,n,e){return this.enabled&&window.history.pushState?(window.history.pushState(n,e,t||"."),s()):o(t,this.options.scroll),this.states[t]=n,this},data:function(t){return t=t||this.get(),this.states[t]===void 0?null:this.states[t]}}),t.State.interval=500,t.State.start=function(){if(c)return t.State;var n="onhashchange"in window&&/MSIE\s(6|7)/.test(navigator.userAgent);return"onpopstate"in window?e("popstate"):n?(e("hashchange"),u=setInterval(function(){a!==window.location.hash&&(a=window.location.hash,i("hashchange"))},t.State.interval)):e("hashchange"),c=!0,t.State},t.State.stop=function(){u&&clearInterval(u);var t="onpopstate"in window?"popstate":"hashchange";return window.removeEventListener?window.removeEventListener(t,s):window[t]&&delete window[t],c=!1,State}}(),function(){t.View=t.Class.extend({init:function(n){return this.cache={},this.options=t.utils.merge({idPrefix:"vc-view-",idSuffix:"",idSeparator:"-",target:!1,http:{prefix:"views/",suffix:".html",headers:{Accept:"text/html"}}},n),this.http=this.options.http instanceof t.Http?this.options.http:new t.Http(this.options.http),this},render:function(t,n){var e=this,i=this.options.idPrefix+t.replace(/\//g,this.options.idSeparator)+this.options.idSuffix,o=function(){"function"==typeof n&&n.call(n,e,t)};return this.cache[t]?(this.renderer(this.cache[t]),o()):document.getElementById(i)?(this.renderer(this.cache[t]=document.getElementById(i).innerHTML),o()):this.http&&this.http.get({url:t,success:function(n){e.renderer(e.cache[t]=n),o()}}),this},renderer:function(t){var n=this.options.target;if(!n)throw"Cannot render view because no target was specified.";"string"==typeof n?n=document.getElementById(n):"function"==typeof n&&(n=n()),n.innerHTML=t}})}(),function(){t.values={},t.value=function(n,e){if("object"==typeof n?(e=n,n="default"):n||(n="default"),t.values[n]===void 0)throw'The value "'+n+'" is not registered as a Velcro Value.';return e=t.utils.merge(t.values[n].options,e),function(i){var o=!1,s=[],r=function(t){return arguments.length?(r.set(t),r.publish(),r.owner):r.get()};return r.options=e,r.owner=i,r.value=null,r.init=function(){"function"==typeof t.values[n].init&&t.values[n].init.call(this),this.options.value!==void 0&&this.set(this.options.value)},r.get=function(){return"function"==typeof t.values[n].get?t.values[n].get.call(this):void 0},r.set=function(e){"function"==typeof t.values[n].set&&t.values[n].set.call(this,e)},r.subscribe=function(t){return s.push(t),this},r.unsubscribe=function(t){for(var n=0;s.length>n;n++)if(t===subscriber)return s.splice(index,1),void 0;return this},r.publish=function(){for(var t=0;s.length>t;t++)s[t]();return this},r.updateEvery=function(t){var n=this;return o=setInterval(function(){n.publish()},t),this},r.stopUpdating=function(){return o&&clearInterval(o),this},r}},t.value.isWrapped=function(n){return"function"==typeof n&&""+n==""+t.value()},t.value.isUnwrapped=function(n){return"function"==typeof n&&""+n==""+t.value()()}}(),function(){t.values.array={init:function(){this.value=[]},get:function(){return this.value},set:function(n){this.value=t.utils.isArray(n)?n:[n]}}}(),function(){t.values.bool={init:function(){this.value=!1},get:function(){return this.value},set:function(t){this.value=t?!0:!1}}}(),function(){t.values.computed={options:{use:[],read:!1,write:!1},init:function(){var t=this,n=this.options.use;for("function"==typeof n&&(n=n.call(this.owner)),"string"==typeof n&&(n=[n]),a=0;n.length>a;a++)"string"==typeof n[a]&&(n[a]=this.owner[n[a]]);for(b=0;n.length>b;b++)n[b].subscribe(function(){t.publish()})},get:function(){if(!this.options.read)throw"Cannot read value because no read function was defined.";return this.options.read.call(this.owner)},set:function(t){if(!this.options.write)throw'Cannot write value "'+t+'" because no write function was defined.';this.options.write.call(this.owner,t)}}}(),function(){t.values["default"]={get:function(){return this.value},set:function(t){this.value=t}}}(),function(){t.values["float"]={init:function(){this.value=0},get:function(){return this.value},set:function(t){this.value=parseFloat(t)}}}(),function(){t.values["int"]={init:function(){this.value=0},get:function(){return this.value},set:function(t){this.value=parseInt(t)}}}(),function(){t.values.many={options:{model:t.Model},init:function(){this.value=new t.Collection(this.options.model),this.value._parent=this.owner},get:function(){return this.value},set:function(t){this.value.from(t)}}}(),function(){t.values.one={options:{model:t.Model},init:function(){this.value=new this.options.model,this.value._parent=this.owner},get:function(){return this.value},set:function(t){this.value.from(t)}}}(),function(){t.values.string={get:function(){return this.value},set:function(t){this.value=""+t}}}(),function(){t.Model=t.Class.extend({_observer:t.value(),_parent:null,init:function(n){var e=[];this._observer=this._observer(this);for(var i in this)t.value.isWrapped(this[i])&&e.push(this[i]=this[i](this));for(var o=0;e.length>o;o++)e[o].init();"function"==typeof this.setup&&this.setup(),this.from(n)},parent:function(){return this._parent},clone:function(){return new this.constructor(this.to())},each:function(n){for(var e in this)t.value.isUnwrapped(this[e])&&n(e,this[e]);return this},from:function(n){return n?(n instanceof t.Model&&(n=n.to()),this.each(function(t,e){n[t]!==void 0&&e(n[t])}),this._observer.publish(),this):this},to:function(){var n={};return this.each(function(e,i){n[e]=i(),(n[e]instanceof t.Model||n[e]instanceof t.Collection)&&(n[e]=n[e].to())}),n}}),t.model=function(n){return t.Model.extend(n)},t.model.make=function(t){return new(this(t))}}(),function(){t.Collection=t.Class.extend({_observer:t.value(),_parent:null,_model:null,init:function(t,n){Array.prototype.push.apply(this,[]),this._observer=this._observer(this),this._model=t,this.from(n)},aggregate:function(n,e){var i=[];return e||(e=[n],n=""),this.each(function(o,s){var r=[];t.utils.each(e,function(t,n){"function"==typeof s[n]&&r.push(s[n]())}),i.push(r.join(n))}),i},at:function(t){return this[t]===void 0?!1:this[t]},first:function(){return this.at(0)},last:function(){return this.at(this.length-1)},has:function(t){return this[t]!==void 0},remove:function(t){return t="number"==typeof t?t:this.index(t),this.has(t)&&(Array.prototype.splice.call(this,t,1),this._observer.publish()),this},empty:function(){return Array.prototype.splice.call(this,0,this.length),this._observer.publish(),this},prepend:function(t){return this.insert(0,t)},append:function(t){return this.insert(this.length,t)},insert:function(n,e){return e=e instanceof t.Model?e:new this._model(e),e._parent=this._parent,Array.prototype.splice.call(this,n,0,e),this._observer.publish(),this},replace:function(n,e){return e=e instanceof t.Model?e:new this._model(e),e._parent=this._parent,Array.prototype.splice.call(this,n,1,e),this._observer.publish(),this},index:function(t){var n=-1;return this.each(function(e,i){return i===t?(n=e,void 0):void 0}),n},from:function(n){function e(t,n){n instanceof i._model||(n=new i._model(n),n._parent=i._parent),Array.prototype.splice.call(i,t,1,n)}var i=this;return n instanceof t.Collection?n.each(e):t.utils.each(n,e),this._observer.publish(),this},to:function(){var t=[];return this.each(function(n,e){t.push(e.to())}),t},each:function(t){for(var n=0;this.length>n;n++)t(n,this[n]);return this},find:function(n,e,i){var o=new t.Collection(this._model);return o._parent=this._parent,n instanceof t.Model&&(n=n.to()),"object"==typeof n&&(n=function(n){return function(){var e=this,i=!0;return t.utils.each(n,function(t,n){return e[t]===void 0||e[t]()!==n?(i=!1,!1):void 0}),i}}(n)),this.each(function(t,s){if(e&&i){var r=e*i-e;if(t>r)return}return n.call(s,t)&&o.append(s),e&&o.length===e?!1:void 0}),o},findOne:function(t){return this.find(t,1).first()}}),t.collection=function(n){return t.Collection.extend({init:function(e){t.Collection.prototype.init.call(this,n,e)}})},t.collection.make=function(t){return new(this(t))}}(),function(){t.bindings={vc:{}}}(),function(){t.bindings.vc.attr=function(n,e){this.update=function(n){var i=t.dom(e);for(var o in n)i.attr(o,n[o])}}}(),function(){t.bindings.vc.check=function(n,e){var i=!1;this.init=function(n,o){t.dom(e).on("change",function(){i=!0,e.checked?o.bind(!0):o.bind(!1),i=!1})},this.update=function(t){i||(e.checked=t.bind?!0:!1)}}}(),function(){t.bindings.vc.click=function(n,e){this.update=function(n){t.dom(e).off("click",n.callback).on("click",n.callback)}}}(),function(){t.bindings.vc.contents=function(n,e){this.update=function(n){n.text!==void 0?t.dom(e).text(n.text||""):n.html!==void 0?t.dom(e).contents(n.html||""):t.utils.throwForElement(e,'The "content" binding must be given a "text" or "html" option.')}}}(),function(){t.bindings.vc.css=function(n,e){this.update=function(n){t.dom(e).css(n)}}}(),function(){t.bindings.vc.disable=function(t,n){this.update=function(t){n.disabled=t.test?!0:!1}}}(),function(){t.bindings.vc.each=function(n,e){var i=e.parentNode,o=[],s=t.dom(e).attr("data-vc-each",""),r=document.createComment("each placeholder"),u=s.html();e.parentNode.insertBefore(r,e),s.destroy(),this.options={as:!1},this.update=function(e){function s(s,a){var c=t.utils.isObject(a)?a:{};c.$index=s,c.$data=a,e.as&&(c[e.as]=a);var h=t.dom(u).raw();n.bind(h,c),o.push(h),i.insertBefore(h,r),delete c.$index,delete c.$data,e.as&&delete c[e.as]}t.utils.each(o,function(n,e){t.dom(e).destroy()}),o=[],e.items instanceof t.Model?e.items.each(function(t,n){s(t,n())}):e.items instanceof t.Collection?e.items.each(s):t.utils.each(e.items,s)}}}(),function(){t.bindings.vc.enable=function(t,n){this.update=function(t){n.disabled=t.test?!1:!0}}}(),function(){t.bindings.vc.extend=function(n,e){var i=t.dom(e),o=i.contents();this.options={path:"",view:{}},this.update=function(i){var s=i.view instanceof t.View?i.view:new t.View(i.view),r=n.context();r.$content=o,s.options.target=e,s.render(i.path,function(){n.bindDescendants(e,r),delete r.$content})}}}(),function(){t.bindings.vc.focus=function(n,e){var i=!1,o=t.dom(e);this.init=function(t,n){o.on("focus",function(){i=!0,n.bind(!0),i=!1}).on("blur",function(){i=!0,n.bind(!1),i=!1})},this.update=function(t){i||(t.bind?(e.focus(),o.fire("focus")):(e.blur(),o.fire("blur")))}}}(),function(){t.bindings.vc.hide=function(t,n){this.update=function(t){n.style.display=t.test?"none":null}}}(),function(){t.bindings.vc["if"]=function(t,n){this.init=function(t){this.display=n.style.display,t.test||(n.style.display="none")},this.update=function(t){t.test?n.style.display=this.display:n.parentNode&&(n.style.display="none")}}}(),function(){t.bindings.vc.ifnot=function(t,n){this.init=function(t){this.display=n.style.display,t.test&&(n.style.display="none")},this.update=function(t){t.test?n.style.display="none":n.parentNode&&(n.style.display=this.display)}}}(),function(){t.bindings.vc.include=function(n,e){this.options={path:"",context:!1,callback:function(){},view:{}},this.update=function(i){var o=i.view instanceof t.View?i.view:new t.View(i.view);o.options.target=e,"function"==typeof i.context&&(i.context=i.context()),i.path||t.utils.throwForElement(e,"A path option must be specified."),o.render(i.path,function(){n.bindDescendants(e,i.context),"function"==typeof i.callback&&i.callback()})}}}(),function(){t.bindings.vc.on=function(n,e){var i=t.dom(e);this.update=function(n){t.utils.each(n,function(t,n){i.off(t,n).on(t,n)})}}}(),function(){function n(t){return t?"function"==typeof t?t():t:""}function e(n,e){return e?"function"==typeof e?e(n):n instanceof t.Model?n[e]():n:""}t.bindings.vc.options=function(i,o){var s=t.dom(o);this.options={options:[],caption:"",text:"",value:""},this.update=function(i){function r(t,n){s.append('<option value="'+e(n,i.value)+'">'+e(n,i.text)+"</option>")}"select"!==s.tag()&&t.utils.throwForElement(o,"The options binding can only be bound to select list."),i.caption!==void 0&&s.contents('<option value="">'+n(i.caption)+"</option>"),typeof i.options instanceof t.Collection?i.options.each(r):t.utils.each(i.options,r)}}}(),function(){t.bindings.vc.routable=function(n,e){this.update=function(n){var i=n.router;i||t.utils.throwForElement(e,"Cannot bind router because it cannot be found."),!i instanceof t.Router&&t.utils.throwForElement(e,'Cannot bind router because it is not an instanceof "vc.Router".'),i.view.options.target=e,i.bind()}}}(),function(){t.bindings.vc.show=function(t,n){this.update=function(t){n.style.display=t.test?null:"none"}}}(),function(){t.bindings.vc.style=function(t,n){this.update=function(t){for(var e in t)n.style[e]="function"==typeof t[e]?t[e]():t[e]}}}(),function(){t.bindings.vc.submit=function(n,e){var i=t.dom(e);this.init=function(t){i.on("submit",function(n){t.callback()!==!0&&(n.preventDefault(),n.stopPropagation())})}}}(),function(){t.bindings.vc.value=function(n,e){var i=t.dom(e);this.options={on:"change"},this.update=function(t,n){function o(){n.value(e.value)}i.off(t.on,o).on(t.on,o),e.value=t.value}}}(),function(){t.bindings.vc["with"]=function(n,e){this.update=function(i){var o;"object"==typeof i.model?o=i.model:"function"==typeof i.controller?o=i.controller():t.utils.throwForElement(e,'You must either specify a model or controller to the "with" context.'),n.bindDescendants(e,o)}}}(),function(){function n(t){var n=!1,e=!0,i=window,o=i.document,s=o.documentElement,r=o.addEventListener?"addEventListener":"attachEvent",u=o.addEventListener?"removeEventListener":"detachEvent",a=o.addEventListener?"":"on";if(init=function(e){("readystatechange"!==e.type||"complete"===o.readyState)&&(("load"==e.type?i:o)[u](a+e.type,init,!1),!n&&(n=!0)&&t.call(i,e.type||e))},poll=function(){try{s.doScroll("left")}catch(t){return setTimeout(poll,50),void 0}init("poll")},"complete"==o.readyState)t.call(i,"lazy");else{if(o.createEventObject&&s.doScroll){try{e=!i.frameElement}catch(c){}e&&poll()}o[r](a+"DOMContentLoaded",init,!1),o[r](a+"readystatechange",init,!1),i[r](a+"load",init,!1)}}var e=[];t.App=t.Class.extend({init:function(){this.contexts=[]},bind:function(t,n){return n&&this.context(n),this.bindOne(t),this.bindDescendants(t),n&&this.contexts.pop(),this},bindDescendants:function(n,e){var i=this;return t.utils.each(n.childNodes,function(t,n){i.bind(n,e)}),this},bindOne:function(n){var i=this;return n=t.dom(n).raw(),-1!==e.indexOf(n)?this:(e.push(n),t.utils.each(n.attributes,function(e,o){if(void 0!==n.attributes[e]&&-1!==o.nodeName.indexOf("data-")){var s=o.nodeName.match(/^data-([^\-]+)-(.+)/);s&&void 0!==t.bindings[s[1]]&&void 0!==t.bindings[s[1]][s[2]]&&i.bindAttribute(n,s[1],s[2],o.nodeValue)}}),this)},bindAttribute:function(n,e,i,o){function s(){var n=t.utils.parseBinding(o,u),e={options:{},bound:{}};for(var i in n)t.value.isUnwrapped(n[i])?(e.options[i]=n[i](),e.bound[i]=e.options[i]instanceof t.Model||e.options[i]instanceof t.Collection?e.options[i]._observer:n[i]):e.options[i]="function"==typeof n[i]?n[i].bind(u):n[i];return e}function r(){var n=s();c.update(t.utils.merge(c.options,n.options),n.bound)}var u=this.context(),a=s(),c=t.bindings[e][i];if("function"!=typeof c)throw'The binding "'+i+'" must be a function.';if(c=new c(this,n),"function"==typeof c.init?c.init(t.utils.merge(c.options,a.options),a.bound):"function"==typeof c.update&&c.update(t.utils.merge(c.options,a.options),a.bound),"function"==typeof c.update)for(var h in a.bound)a.bound[h].subscribe(r);return this},context:function(t){return 0===arguments.length?(this.contexts.length||this.context({}),this.contexts[this.contexts.length-1]):(this.contexts.length?(t.$parent=this.contexts[this.contexts.length-1],t.$root=this.contexts[0]):(t.$parent=!1,t.$root=!1),this.contexts.push(t),this)}}),t.app=function(e,i){var o=new t.App;return i===void 0&&(i=e,e=document),n(function(){o.bind(e,i)}),o}}()});